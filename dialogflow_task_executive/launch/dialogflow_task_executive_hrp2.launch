<launch>
  <arg name="project_id" default="hrp2-xhwxsc"/>
  <arg name="credential" default="/etc/opt/jsk/robot/JSK-HRP2-0dd799e92552.json"/>
  <!-- for speech recognition -->
  <arg name="engine" default="Google" /> <!-- Google or GoogleCloud -->
  <arg name="language" default="ja-JP" />
  <arg name="continuous" default="true" />
  <arg name="launch_sound_play" default="false" />
  <arg name="launch_audio_capture" default="true" />

  <include file="$(find dialogflow_task_executive)/launch/dialogflow_task_executive.launch">
    <arg name="credential" value="$(arg credential)" />
    <arg name="project_id" value="$(arg project_id)" />
    <arg name="run_app_manager" value="true" />
    <arg name="applist" value="$(find hrp2_73b2_demo_2019)/apps" />
  </include>

  <!-- sound play -->
  <node name="sound_play" pkg="sound_play" type="soundplay_node.py"
        if="$(arg launch_sound_play)"
        respawn="true">
    <remap from="robotsound" to="sound_play" />
  </node>

  <!-- audio capture from microphone -->
  <node name="audio_capture" pkg="audio_capture" type="audio_capture"
        if="$(arg launch_audio_capture)"
        respawn="true">
    <rosparam>
      format: wave
      channels: 1
      depth: 16
      sample_rate: 16000
    </rosparam>
  </node>

  <node name="speech_recognition_dialogflow"
        pkg="ros_speech_recognition" type="speech_recognition_node.py"
        respawn="true"
        output="screen">
    <remap from="/Tablet/voice" to="/speech_to_text_google" />
    <rosparam subst_value="true">
      engine: $(arg engine)
      language: $(arg language)
      continuous: $(arg continuous)
    </rosparam>
  </node>
</launch>
