<launch>
  <!-- for speech recognition -->
  <arg name="engine" default="Google" /> <!-- Google or GoogleCloud -->
  <arg name="language" default="ja-JP" />
  <arg name="continuous" default="true" />
  <arg name="launch_sound_play" default="false" />
  <arg name="launch_audio_capture" default="true" />
  <!-- for dialogflow task executive -->
  <arg name="credential" default="$(env GOOGLE_APPLICATION_CREDENTIALS)"/>
  <arg name="project_id" default="$(env DIALOGFLOW_PROJECT_ID)"/>
  <arg name="run_app_manager" default="true" />
  <arg name="applist" default="$(find hrp2_73b2_demo_2019)/apps" />

  <!-- speech recognition -->
  <include file="$(find ros_speech_recognition)/launch/speech_recognition.launch">
    <arg name="engine" value="$(arg engine)" />
    <arg name="language" value="$(arg language)" />
    <arg name="continuous" value="true" />
    <arg name="launch_sound_play" value="$(arg launch_sound_play)" />
    <arg name="launch_audio_capture" value="$(arg launch_audio_capture)" />
  </include>

  <!-- dialogflow task executive -->
  <node name="dialogflow_client"
        pkg="dialogflow_task_executive" type="dialogflow_client.py"
        output="screen">
    <rosparam subst_value="true">
      use_audio: false
      language: ja-JP
      use_tts: true
      project_id: $(arg project_id)
    </rosparam>
    <remap from="speech_to_text" to="/Tablet/voice" />
  </node>

  <node name="task_executive"
        pkg="dialogflow_task_executive" type="task_executive.py"
        output="screen">
    <rosparam subst_value="true">
    </rosparam>
  </node>

  <!-- app manager -->
  <group if="$(arg run_app_manager)">
    <include file="$(find jsk_robot_startup)/lifelog/app_manager.launch">
      <arg name="use_applist" value="true" />
      <arg name="applist" value="$(arg applist)"/>
      <arg name="respawn" value="false" />
    </include>
  </group>
</launch>
